<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        html {
            font-family: monospace
        }

        a {
            text-decoration: none;
        }

        th {
            max-width: 5rem;
            max-height: 8rem;
            overflow: hidden;
            vertical-align: top;
            position: sticky;
            top: 0;
            background-color: var(--bs-dark-bg-subtle);
        }

        table {
            border-collapse: collapse;
            position: relative;
        }

        td,
        th {
            border: 1px solid var(--bs-secondary-color);
            padding: 5px;
        }

        .no-border {
            border: 0px;
            background-color: transparent;
        }

        .top-left {
            position: absolute;
            top: 5px;
            left: 5px;
        }

        thead tr th {
            vertical-align: bottom;
        }

        thead tr th div.vertical {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
        }

        .windows::before {
            content: '\f17a';
            font: var(--fa-font-brands);
        }

        .linux::before {
            content: '\f17c';
            font: var(--fa-font-brands);
        }

        .success::before {
            content: '\f00c';
            font: var(--fa-font-solid);
            color: var(--bs-success-text-emphasis);
        }

        .fail::before {
            content: '\f00d';
            font: var(--fa-font-solid);
            color: var(--bs-danger-text-emphasis);
            border: 2px var(--bs-danger-border-subtle) solid;
        }

        .missing-screenshot::before {
            content: '\f070';
            font: var(--fa-font-solid);
            color: var(--bs-info-text-emphasis);
        }
    </style>
</head>

<body data-bs-theme="dark">
    <table>
        <thead>
            <tr>
                <th class="no-border"></th>
                <th class="no-border"></th>
                {% for run in runs %}
                <th style="width: 4rem; height: 13rem;">
                    <div class="vertical">
                        {{ run.date }}
                        <a href="https://github.com/bevyengine/bevy/commit/{{ run.commit }}">{{
                            run.commit|truncate(length=7, end="") }}</a>
                    </div>
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for example in all_examples %}
            <tr>
                <td style="border-right: none;">{{ example.category }} / {{ example.name }}</td>
                <td style="border-left: none;">
                    <span class="windows"></span>
                    <hr>
                    <span class="linux"></span>
                </td>
                {% for run in runs %}
                <td style="text-align: center;">
                    {% if run.results[example.name] %}
                    {% if run.results[example.name]["Windows"] %}
                    {% if run.results[example.name]["Windows"] == "successes" %}
                    {% if run.screenshots[example.name]["Windows"] %}
                    <span class="success" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-html=true
                        data-bs-content='<img class="img-fluid" src="{{ run.screenshots[example.name]["Windows"] }}" />'></span>
                    {% else %}
                    <span class="missing-screenshot"></span>
                    {% endif %}
                    {% elif run.results[example.name]["Windows"] == "failures" %}
                    <span class="fail"></span>
                    {% elif run.results[example.name]["Windows"] == "no_screenshots" %}
                    <span class="missing-screenshot"></span>
                    {% endif %}
                    {% else %}
                    -
                    {% endif %}
                    <hr />
                    {% if run.results[example.name]["Linux"] %}
                    {% if run.results[example.name]["Linux"] == "successes" %}
                    {% if run.screenshots[example.name]["Linux"] %}
                    <span class="success" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-html=true
                        data-bs-content='<img class="img-fluid" src="{{ run.screenshots[example.name]["Linux"] }}" />'></span>
                    {% else %}
                    <span class="missing-screenshot"></span>
                    {% endif %}
                    {% elif run.results[example.name]["Linux"] == "failures" %}
                    <span class="fail"></span>
                    {% elif run.results[example.name]["Linux"] == "no_screenshots" %}
                    <span class="missing-screenshot"></span>
                    {% endif %}
                    {% else %}
                    -
                    {% endif %}
                    {% else %}
                    -
                    <hr />-
                    {% endif %}

                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    <script>
        const popoverTriggerList = document.querySelectorAll(' [data-bs-toggle="popover" ]')
        const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
    </script>
</body>

</html>